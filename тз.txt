–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

    aiogram (v3.20+, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

    PostgreSQL + SQLAlchemy (ORM, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º)

    Docker + Docker-compose (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞, –ë–î, Redis –¥–ª—è FSM)

    FSM (Finite State Machine –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö —Ñ–æ—Ä–º)

    Redis (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM)

    XTR API (–¥–ª—è –æ–ø–ª–∞—Ç—ã Telegram Stars)

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–æ–ª–∏:

        –°–æ–∑–¥–∞—Ç–µ–ª—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞: –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å 1 —Ä–µ—Å—Ç–æ—Ä–∞–Ω, –¥–æ–±–∞–≤–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏.

        –ü–∞—Ä—Ç–Ω—ë—Ä: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É –ø–æ —Å—Å—ã–ª–∫–µ/–∫–æ–¥—É, –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑—ã.

    –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (—Ä–µ–ø–ª–∞–π-–∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ /start):

    [üç¥ –°–æ–∑–¥–∞—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω]  
    [üîë –í–æ–π—Ç–∏ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω]  
    [üåü –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å] 

    –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞:

        –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è [üç¥ –°–æ–∑–¥–∞—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω] –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è FSM:

            –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞.

            –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ FSM:

                –ù–∞–∑–≤–∞–Ω–∏–µ (–º–∞–∫—Å. 20 —Å–∏–º–≤–æ–ª–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å–∞–π–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ–¥ –∫–Ω–æ–ø–∫–∏).

                –§–æ—Ç–æ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏).

                –û–ø–∏—Å–∞–Ω–∏–µ.

                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≤ –º–∏–Ω—É—Ç–∞—Ö).

                –û–ø–ª–∞—Ç–∞ (–≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏: üíã –ü–æ—Ü–µ–ª—É–π—á–∏–∫–∏, ü§ó –û–±–Ω–∏–º–∞—à–∫–∏ (—É–∫–∞–∑–∞—Ç—å –º–∏–Ω—É—Ç—ã)).

        –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –∫–æ–¥–∞.

    –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É:

        –ü–∞—Ä—Ç–Ω—ë—Ä –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ.

        –ü—Ä–æ–≤–µ—Ä–∫–∞: 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = 1 –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω.

    –ú–µ–Ω—é –∑–∞–∫–∞–∑–∞:

        Inline-–∫–Ω–æ–ø–∫–∏ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ + —ç–º–æ–¥–∑–∏ üíã/ü§ó + –≤—Ä–µ–º—è).

        –í—ã–±–æ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π (–∫–æ—Ä–∑–∏–Ω–∞).

        –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

            –°–æ–∑–¥–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∑–∞–∫–∞–∑–æ–º (—Å–ø–∏—Å–æ–∫ + —Å—É–º–º–∞—Ä–Ω–∞—è –æ–ø–ª–∞—Ç–∞/–≤—Ä–µ–º—è).

            –ü–∞—Ä—Ç–Ω—ë—Ä –ø–æ–ª—É—á–∞–µ—Ç –∏—Ç–æ–≥: üíã√ó5 + ü§ó√ó15 –º–∏–Ω | –û–±—â–µ–µ –≤—Ä–µ–º—è: 30 –º–∏–Ω.

    –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars:

        Inline-–º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏: 1, 10, 15, 30, 50, 75, 100, 200, 300, 500, 700, 1000 ‚òÖ + —Å–≤–æ—è —Å—É–º–º–∞.

        –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å XTR API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π.

    –ê–¥–º–∏–Ω–∫–∞ —Å–æ–∑–¥–∞—Ç–µ–ª—è:

        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏.

        –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤.

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, SQLAlchemy):
python

class User(Base):  
    id = Column(Integer, primary_key=True)  
    is_restaurant_owner = Column(Boolean)  
    current_restaurant_id = Column(Integer, ForeignKey("restaurant.id"))  

class Restaurant(Base):  
    id = Column(Integer, primary_key=True)  
    owner_id = Column(Integer, ForeignKey("user.id"))  
    invite_code = Column(String(10), unique=True)  
    menu_items = relationship("MenuItem")  

class MenuItem(Base):  
    id = Column(Integer, primary_key=True)  
    name = Column(String(20))  
    photo = Column(String)  
    duration = Column(Integer)  
    price_kisses = Column(Integer)  
    price_hugs = Column(Integer)  

Docker-compose:
yaml

services:  
  bot:  
    image: python:3.11  
    command: python -m bot  
    volumes:  
      - .:/app  
    depends_on:  
      - postgres  
      - redis  

  postgres:  
    image: postgres:15  
    environment:  
      POSTGRES_DB: love_restaurant  
      POSTGRES_USER: user  
      POSTGRES_PASSWORD: password  

  redis:  
    image: redis:7  

–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ:

    –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ ‚Äî —Å —ç–º–æ–¥–∑–∏ (–ø—Ä–∏–º–µ—Ä: üõçÔ∏è –ö–æ—Ä–∑–∏–Ω–∞, üìù –°–æ–∑–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é).

    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–∑–∏—Ü–∏–π –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫.

–í–∞–∂–Ω–æ:

    –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î —á–µ—Ä–µ–∑ asyncpg + SQLAlchemy 2.0.

    –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–µ—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å).

    –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

    –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î.

    –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Redis (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞).

    Graceful shutdown –±–æ—Ç–∞.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏):
python

@router.message(StateFilter(MenuItemForm.name))  
async def process_item_name(message: Message, state: FSMContext):  
    if len(message.text) > 20:  
        await message.answer("–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ! –ú–∞–∫—Å. 20 —Å–∏–º–≤–æ–ª–æ–≤ üòî")  
        return  
    await state.update_data(name=message.text)  
    await message.answer("–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ üñºÔ∏è")  
    await state.set_state(MenuItemForm.photo)  

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

handlers/  
  - owners.py  
  - partners.py  
  - payments.py  
keyboards/  
  - inline.py  
models/  
  - user.py  
  - restaurant.py  
services/  
  - payment.py  


–ü–û —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ —Ç–∑ –æ–ø–∏—Å–∞–Ω–æ–µ
 (aiogram, postgresql, docker, docker-compose, sqlaclhemy, fsm):
–ù–∞–∑–≤–∞–Ω–∏–µ Love Restaurant
–Ω—É–∂–µ–Ω –±–æ—Ç –≤ —Ç–≥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å–≤–æ–π "—Ä–µ—Å—Ç–æ—Ä–∞–Ω –ª—é–±–≤–∏"
–∞ –¥—Ä—É–≥–æ–º—É(–ø–∞—Ä—Ç–Ω–µ—Ä—É) –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –Ω–µ–º—É –∏ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å –µ–¥—É.

–ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ç–∞–∫–∞—è

–û–¥–∏–Ω —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–µ–≤—É—à–∫–∞ —Å–æ–∑–¥–∞—ë—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω –≥–¥–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –µ–¥—É –∑–∞ –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∏ –∏ –∑–∞ –æ–±–Ω–∏–º–∞—à–∫–∏, –æ–Ω–∞ —Å–∞–º–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–æ–∑–∏—Ü–∏—é –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–∞–∫–∂–µ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç) –∏ –æ–ø–ª–∞—Ç—É –º–æ–∂–Ω–æ –∏ –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∏ –∏ –æ–±–Ω–∏–º–∞—à–∫–∏ (–æ–±—ä—è—Ç–∏—è –≤ –º–∏–Ω—É—Ç–∞—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏) 
–û–Ω–∞ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç.–¥
–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–ª–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω, –æ–Ω–∞ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–µ—Ä–µ–π–¥—è –ø–æ –∫–æ—Ç–æ—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç –∫ —ç—Ç–æ–º—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É (–ª–∏–±–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ–≤–æ–π –∫–æ–¥)
—á–µ–ª–æ–≤–µ–∫ —Å–º–æ–∂–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ) –∏ –¥–∞–ª–µ–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ö–æ–∑—è–∏–Ω—É —Ä–µ—Å—Ç–æ—Ä–Ω–∞, –µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–∑–∏—Ü–∏—è—Ö, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–∫–∞–∑–∞–≤—à–µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–±—â–∞—è –æ–ø–ª–∞—Ç–∞ –≤ –ø–æ—Ü–µ–ª—É—è—á–∏–∫–∞—Ö, –æ–±—ä—è—Ç–∏—è—Ö, –∏ –æ–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–∫ —á—Ç–æ–±—ã –≤–ª–µ–∑–∞–ª–æ –≤ –∫–Ω–æ–ø–∫—É –¥–æ 20 –¥—É–º–∞—é, –∏ —á—Ç–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—Å–∞–π–∑–∞–ª–æ , –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞ —ç—Ç–∏ –∫–Ω–æ–ø–∫–∏ –±—É–¥–µ—Ç –∑–∞–∫–∞–∑—á–∏–∫ –Ω–∞–∂–∏–º–∞—Ç—å
–í—Å—ë —á–µ—Ä–µ–∑ –∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏ (–≤—ã–±–æ—Ä –ø–æ–∑–∏—Ü–∏–π, —Å–æ–∑–¥–∞–Ω–∏—è –º–µ–Ω—é –∏ —Ç.–¥)
–ö—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ —Å —ç–º–æ–¥–∑–∏ —É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–Ω–æ–ø–∫–∞—Ö
–í—Å–µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é–∏—Ç—å—Å—è –∫ –æ–¥–Ω–æ–º—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É –∏ —Å–æ–∑–¥–∞—Ç—å –≤—Å–µ–≥–æ –æ–¥–∏–Ω —Ä–µ—Å—Ç–æ—Ä–∞–Ω
–≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é (—Ä–µ–ø–ª–∞–π –∫–Ω–æ–ø–∫–∏) –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /start
–±—É–¥–µ—Ç 
[–°–æ–∑–¥–∞—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω]
[–í–æ–π—Ç–∏ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω]
[–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å] - —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–π –±—É—Å—Ç–∏ https://boosty.to/onxen/donate (–¥–æ–Ω–∞—Ç)
https://boosty.to/onxen/ (–ø–æ–¥–ø–∏—Å–∫–∏)
—Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–ª–∞—Ç—É –∑–≤–µ–∑–¥–∞–º–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏–Ω–ª–∞–π–Ω –æ—Ç 
1,10,15,30,50,75,100,200,300,500,700,1000
–∏ –∫–Ω–æ–ø–∫–∞ —Å–≤–æ—è —Å—É–º–º–∞
—á–µ—Ä–µ–∑ –∑–≤–µ–∑–¥—ã —Ç–µ–ª–µ–≥—Ä–∞–º–º xtr
—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ - 7726328456:AAEAc1qIw04n9XBLuZBoU4rKO-Ogkw0zBTo